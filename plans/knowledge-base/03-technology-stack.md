# AES Knowledge Base — Technology Stack

## Full Stack Overview

| Layer | Technology | Notes |
|-------|-----------|-------|
| **Backend** | NestJS (Node.js) | Modular control plane; manages APIs and ZeroClaw orchestration |
| **Frontend** | Next.js (App Router) | Unified platform for UI and SSR |
| **Component Library** | Shadcn UI | Professional dark/light theme components |
| **Theme Management** | next-themes | Theme toggle with brand colors |
| **Database** | MongoDB 8.0 | Structured data + vector knowledge storage |
| **Agent Kernel** | ZeroClaw (Rust) | High-performance reasoning loop and tool engine |
| **Local LLM** | Ollama | Orchestrates local models for 8GB RAM preservation |
| **Flow Designer** | React Flow | Workflow Blueprint Designer |
| **Rich Text Editor** | Tiptap | Requirements "Confluence" space |
| **Charts** | Recharts | Analytics visualizations |
| **File Watcher** | Chokidar | Usage monitoring |
| **Auth** | MongoDB + bcrypt + JWT | Email/password auth, httpOnly cookie session, no Firebase |
| **Reverse Proxy** | Caddy or Nginx | SSL termination |
| **Containerization** | Docker | Librarian MCP engines |

## LLM Providers Supported

- **Ollama** (local, default: `qwen2.5-coder:1.5b`)
- **OpenAI**
- **Anthropic**
- **Google**

## Default Models

- Default local model: `qwen2.5-coder:1.5b`
- Model is configurable per AgentInstance

## File Structure Conventions

```
/artifacts/
  {projectId}/
    librarian/            ← Librarian knowledge index (shared)
    workspaces/
      {agentInstanceId}/  ← Per-agent git clone
        .git/
        .aes/
          standards.md    ← Generated by Librarian
        zeroclaw.config.toml
        identity.json
        soul.md
        state/
          costs.jsonl     ← LLM cost records (watched by AnalyticsService)
          runtime-trace.jsonl  ← Tool call / model reply traces
        memory/
          brain.db        ← SQLite hybrid vector+FTS memory (NEVER delete)
```

## Key Configuration Files Per Agent

- `zeroclaw.config.toml` — ZeroClaw runtime config (generated by AES before spawn)
- `soul.md` — Personality/behavioral prompt (Markdown)
- `identity.json` — AIEOS v1.1 payload
- `state/costs.jsonl` — LLM cost and token usage records (one JSON per line)
- `state/runtime-trace.jsonl` — Tool calls, model replies, diagnostic traces
- `memory/brain.db` — SQLite hybrid vector + FTS5 memory (auto-loaded by ZeroClaw; never delete)

> **Note**: The PRD mentions `session.jsonl`, `transcript.jsonl`, and `usage.json` — these file names do not exist in ZeroClaw. The table above shows the correct names from ZeroClaw source code.

## Encryption

- Sensitive keys (Slack token, GitHub private key, LLM API keys) stored AES-256 encrypted in MongoDB

## References

- PRD.md §14 (Technology Stack Summary)
- PRD.md §12 (Deployment & Installation)
- PRD.md §13 (LLM & API Key Management)
- PRD.md §6 (Workspace & Git Strategy)
